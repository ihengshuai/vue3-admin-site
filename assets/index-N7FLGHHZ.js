var L=Object.defineProperty,U=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var M=(e,t,i)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,m=(e,t)=>{for(var i in t||(t={}))X.call(t,i)&&M(e,i,t[i]);if(H)for(var i of H(t))Y.call(t,i)&&M(e,i,t[i]);return e},h=(e,t)=>U(e,W(t));import{I as F,z as A,a7 as Z,M as S,p as B,a8 as ee,a9 as te,h as k,m as le,aa as ne,ab as E,ac as ae,ad as V,V as ie,S as oe}from"./antd-B5dqVz-4.js";import{i as v,o as j,p as P,a as ue}from"./index.CCNGGU.js";import{d as C,c as f,k as l,S as p,u as $,i as D,F as K,f as ce}from"./vue-C05a2vRq.js";import{u as I}from"./dom-B5d93tGn.js";function N(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!D(e)}const Q={operations:{type:Array,default:()=>[]},bodyCell:{type:Object,default:()=>({})},operateCollapseMin:{type:Number,default:0}},re=C({name:"ITableOperator",props:Q,setup(e){const t=f(()=>e.operations.filter(u=>v(u.validator)?u.validator(e.bodyCell):!0)),i=f(()=>e.operateCollapseMin>0&&t.value.length>=e.operateCollapseMin),r=f(()=>{const u={};return t.value.length&&t.value.forEach(d=>{u[d.key]=d}),u});function c({key:u}){var d;(d=r.value[u])==null||d.handler(e.bodyCell)}return()=>{let u;const d=l(A,{wrap:!0,class:"table-operator"},N(u=t.value.map(a=>{var n,g;return l(F,p({key:a.key},a.buttonProps,{type:((n=a.buttonProps)==null?void 0:n.type)||"link",loading:$((g=a.buttonProps)==null?void 0:g.loading),disabled:v(a==null?void 0:a.disabled)?a.disabled(e.bodyCell):a.disabled,onClick:()=>a.handler($(e.bodyCell))}),{default:()=>[a.value&&(v(a.value)?a.value(e.bodyCell):a.value)],icon:()=>{var y;return(y=a.buttonProps)==null?void 0:y.icon}})}))?u:{default:()=>[u]}),O=l(B,null,{default:()=>[l(Z,null,null)],overlay:()=>{let a;return l(S,{onClick:c,class:"table-operator"},N(a=t.value.map(n=>l(S.Item,{key:n.key,disabled:v(n==null?void 0:n.disabled)?n.disabled(e.bodyCell):n.disabled},{default:()=>{var g;return[l(F,p(n.buttonProps,{type:((g=n.buttonProps)==null?void 0:g.type)||"link",disabled:v(n==null?void 0:n.disabled)?n.disabled(e.bodyCell):n.disabled}),{default:()=>[n.value&&(v(n.value)?n.value(e.bodyCell):n.value)],icon:()=>{var y;return(y=n.buttonProps)==null?void 0:y.icon}})]}})))?a:{default:()=>[a]})}});return i.value?O:d}}}),R=h(m({},ee()),{align:{type:String,default:"end"}}),de=Object,se=I("pagination"),be=C({name:"IPagination",props:R,slots:de,setup(e,{slots:t}){const i=f(()=>j(e));return()=>l(k,{class:se.b(),justify:e.align},{default:()=>{var r,c;return[(r=t.prefix)==null?void 0:r.call(t),l(te,i.value,null),(c=t.suffix)==null?void 0:c.call(t)]}})}}),fe=I("table-header__toolbar__item"),ge=C({name:"ITableHeaderSettingTool",setup(){return()=>l("span",{class:fe.b()},[l(le,null,null)])}});function ye(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!D(e)}const q=I("table-header__toolbar__item"),me=q.e("menu"),z={size:{type:String,default:"middle"},onChange:{type:Function,default:null}},ve=C({name:"ITableHeaderSizeTool",props:z,setup(e){const t=[{label:"紧凑",value:"small"},{label:"默认",value:"middle"},{label:"宽松",value:"large"}],i=r=>{var c;(c=e.onChange)==null||c.call(e,r)};return()=>{let r;return l(E,{title:"表格密度调整"},{default:()=>[l(B,{trigger:"click",placement:"bottom",overlay:l(S,{class:me,selectedKeys:[e.size],onClick:({key:c})=>i(c)},ye(r=t.map((c,u)=>l(K,null,[u>0&&l(S.Divider,null,null),l(S.Item,{key:c.value},{default:()=>[c.label]})])))?r:{default:()=>[r]})},{default:()=>[l("span",{class:q.b()},[l(ne,null,null)])]})]})}}}),_=I("table-header"),Ce=_.b(),Te=_.e("toolbar"),he=_.e("title"),G={defaultTool:{type:Boolean,default:!0}},Se=C({name:"ITableHeader",props:h(m(m({},G),P(z,"size")),{onSizeChange:P(z,"onChange").onChange}),setup(e,{slots:t}){return()=>{var c,u;const i=(c=t.title)==null?void 0:c.call(t),r=(u=t.titleTip)==null?void 0:u.call(t);return l(k,{align:"center",justify:"space-between",class:Ce},{default:()=>[i&&l(k,{align:"center",class:he},{default:()=>[i,r&&l(E,{title:r,placement:"right"},{default:()=>[l(ae,{class:"tip-icon"},null)]})]}),l(k,{flex:1,justify:"end",class:Te},{default:()=>[l(A,{align:"center",wrap:!0},{default:()=>{var d;return[(d=t.toolbar)==null?void 0:d.call(t),e.defaultTool&&l(K,null,[l(ve,{onChange:e.onSizeChange,size:e.size},null),l(ge,null,null)])]}})]})]})}}}),Ie=h(m(h(m(m({},V()),j(Q,"bodyCell")),{paginationAlign:P(R,"align").align}),G),{loadingTip:{type:String,default:null},title:{type:[String,Function]},titleTip:{type:[String,Object],default:null},showTitle:{type:Boolean,default:!1},wrapclass:{type:String}}),Oe=I("table"),_e=C({name:"ITable",props:Ie,setup(e,{slots:t,attrs:i}){const{t:r}=ue(),c=f(()=>j(P(e,...Object.keys(V())),"pagination","title")),u=f(()=>[Oe.b(),e.wrapclass]),d=ce(e.size||"middle"),O=f(()=>e.operations.length>0),a=f(()=>{const s=e.columns;return!(s.filter(o=>o.key==="operation").length>0)&&O.value&&s.push({title:r("common.operation"),key:"operation",align:"center"}),s}),n=f(()=>{const s={};return a.value.length&&a.value.forEach(b=>{s[b.key]=b}),s}),g=s=>{var b,o;return(b=n.value.operation)!=null&&b.customRender?(o=n.value.operation)==null?void 0:o.customRender(s):l(re,{operations:e.operations,bodyCell:s,operateCollapseMin:e.operateCollapseMin},null)},y=(s,b)=>{const[o]=e.columns.filter(T=>T.sorter&&T.sortOrder)||[];e.onChange({current:s,pageSize:b},{},{columnKey:o==null?void 0:o.key,field:o==null?void 0:o.key,order:o==null?void 0:o.sortOrder},{})};return()=>l(oe,{spinning:e.loading,tip:e.loadingTip},{default:()=>{var s;return[l(ie,p(c.value,{columns:a.value,size:d.value,pagination:!1,loading:!1,class:u.value},i),{bodyCell:b=>{var o;return O.value&&b.column.key==="operation"?g(b):(o=t.bodyCell)==null?void 0:o.call(t,b)},title:b=>{var w,x;const o=v(e.title)?(w=e.title)==null?void 0:w.call(e,b):e.title,T=(x=t.toolbar)==null?void 0:x.call(t);return(e.showTitle||o||T)&&l(Se,{onSizeChange:J=>d.value=J,size:d.value,defaultTool:e.defaultTool},{title:o&&(()=>o),titleTip:e.titleTip&&(()=>e.titleTip),toolbar:()=>T})}}),e.pagination&&((s=e.dataSource)==null?void 0:s.length)>0&&l(be,p(e.pagination,{align:e.paginationAlign,onChange:y}),{prefix:t.paginationPrefix,suffix:t.paginationSuffix})]}})}});export{_e as I};
