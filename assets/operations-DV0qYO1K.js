var F=Object.defineProperty,R=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var g=(l,t,o)=>t in l?F(l,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[t]=o,b=(l,t)=>{for(var o in t||(t={}))K.call(t,o)&&g(l,o,t[o]);if(v)for(var o of v(t))V.call(t,o)&&g(l,o,t[o]);return l},k=(l,t)=>R(l,J(t));import{b as j}from"./index-Cwyg722P.js";import{I as h}from"./index-Ciw2v_La.js";import{I as z}from"./index-N7FLGHHZ.js";import{a as A,g as f}from"./index.CCNGGU.js";import{u as U}from"./useTablePage-dZzMJE_P.js";import{X as _,Q as d,Y as $,h as x,J as B,z as C,K as w,N as L,O as M,I as s,Z as Q}from"./antd-B5dqVz-4.js";import{d as X,f as I,r as Y,k as a,E as p,S as Z,F as q,i as G}from"./vue-C05a2vRq.js";import"./index-CKfTYYqA.js";import"./dom-B5d93tGn.js";function O(l){return typeof l=="function"||Object.prototype.toString.call(l)==="[object Object]"&&!G(l)}const H=[{label:"男",value:"male"},{label:"女",value:"remale"},{label:"全部",value:"-1"}],ie=X({name:"TableOperationsPage",setup(){const{t:l}=A(),t=I(0),o=()=>t.value===0?t.value=1:t.value=0,u=Y({keywords:{value:null,defaultValue:"",validate:e=>isNaN(parseInt(e))},sex:{value:null,defaultValue:"male",immediate:!0,validate:e=>["male","remale","-1"].includes(e),transform:e=>e==="-1"?null:e}}),P=I([{title:"ID",dataIndex:"id",sorter:!0,key:"id"},{title:"名字",dataIndex:"name",key:"name"},{title:"年龄",dataIndex:"age",sorter:!0,key:"age"},{title:"性别",dataIndex:"sex",key:"sex",customRender:({text:e})=>e==="male"?"男":"女"}]),S=[{key:f.CREATE,buttonProps:{size:"small",icon:a(_,null,null),shape:"circle",type:"primary"},validator:e=>e.record.age!==10,disabled:e=>e.record.age>10,handler:e=>d.info("创建"+JSON.stringify(e))},{key:f.UPDATE,value:l("edit"),disabled:e=>e.record.age===16,handler:e=>d.info("编辑"+JSON.stringify(e))},{key:f.DELETE,value:e=>e.record.name==="关羽"?a($,null,null):l("delete"),disabled:e=>e.record.age===16,buttonProps:{danger:!0,type:"link"},handler:e=>d.info("删除"+JSON.stringify(e))}],{isEmpty:c,isFetchEnd:m,tableProps:T,dataSource:N,onSearch:y,resetSearch:D,selection:i}=U({selectable:!0,columns:P.value,filters:u,tableProps:{showSorterTooltip:{title:" 点击排序"}},pagination:e=>k(b({},e),{size:"small",showQuickJumper:!0,showSizeChanger:!0,showTotal:(n,[r,E])=>`共 ${n} 条记录 第 ${r} - ${E} 条`}),fetchData:j});return()=>{let e,n;return a(q,null,[a(h,null,{default:()=>[a(x,null,{default:()=>[a(x,{flex:1},{default:()=>[a(B,{class:"table-form"},{default:()=>[a(C,null,{default:()=>[a(w,{name:"keywords"},{default:()=>[a(L,{value:u.keywords.value,"onUpdate:value":r=>u.keywords.value=r,placeholder:"请输入关键字",allowClear:!0,style:"width: 200px",onPressEnter:y},null)]}),a(w,{name:"sex"},{default:()=>[a(M,{value:u.sex.value,"onUpdate:value":r=>u.sex.value=r,options:H,style:"width: 100px"},null)]}),a("strong",null,[(c==null?void 0:c.value)&&"没数据"]),a("strong",null,[(m==null?void 0:m.value)&&"加载完毕"])]})]})]}),a(C,null,{default:()=>[a(s,{type:"text",onClick:D},O(e=l("reset"))?e:{default:()=>[e]}),a(s,{type:"primary",onClick:y},O(n=l("search"))?n:{default:()=>[n]})]})]})]}),a(h,{title:a(Q,null,{default:()=>[a(s,{onClick:()=>i.selectedRowKeys=N.value.map(r=>r.id)},{default:()=>[p("全选")]}),a(s,{onClick:()=>i.selectedRowKeys=[]},{default:()=>[p("取消")]}),a(s,{type:"primary",disabled:!i.selectedRowKeys.length,onClick:()=>d.info("删除"+i.selectedRowKeys.join(","))},{default:()=>[p("批量删除")]})]}),extra:a(s,{type:"dashed",danger:!0,onClick:o},{default:()=>[p("操作收缩")]})},{default:()=>[a(z,Z(T.value,{operations:S,operateCollapseMin:t.value}),null)]})])}}});export{ie as default};
